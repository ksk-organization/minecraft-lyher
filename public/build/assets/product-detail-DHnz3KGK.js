import{c as S,j as e,e as G,r as g,u as J,H as V,L as X}from"./app-DYZEWR9f.js";import{a as O,c as y,B as v}from"./button-BNjhHhXl.js";import{I as T}from"./input-UNpVU_Km.js";import{c as I,C as q,a as z,b as F}from"./card-CtE0kItz.js";import{L as w}from"./label-Dt9sGqjz.js";import{B as U}from"./badge-BVP7QHK5.js";import{L as Y,S as L}from"./layout-BgK4jCEw.js";import{C}from"./circle-check-BoB2F9g5.js";import{e as K,f as Z,T as ee,d as te}from"./tooltip-hIISYpD1.js";import{M as se}from"./monitor-r0CegDqK.js";import{s as B}from"./index-BsxvijQw.js";import{M as re}from"./minus-CH8jwXre.js";import{P as ae}from"./plus-Cp8nUOs1.js";import{L as A}from"./loader-circle-CVcT5T6g.js";import{C as ne}from"./circle-alert-B5SSDFdW.js";import{X as ie}from"./x-DgSYHSTW.js";/* empty css            */import"./index-kWQgRmzC.js";import"./index-DtU-piBd.js";import"./FlashMessage-BROjTjjb.js";import"./index-Ceaq-OvL.js";const oe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],le=O("Smartphone",oe);const ce=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],de=O("Upload",ce);function me(r){const t=S.c(11),{mainImage:c,thumbnails:i,alt:n,onThumbClick:x}=r;let o;t[0]!==n||t[1]!==c?(o=e.jsx("div",{className:"relative aspect-square overflow-hidden rounded-2xl border border-white/5 bg-[#0f0f0f] shadow-2xl",children:e.jsx("img",{src:c,alt:n,className:"h-full w-full object-contain p-8 transition-transform duration-700 hover:scale-105 md:p-12",loading:"eager"})}),t[0]=n,t[1]=c,t[2]=o):o=t[2];let m;t[3]!==n||t[4]!==c||t[5]!==x||t[6]!==i?(m=i.length>1&&e.jsx("div",{className:"scrollbar-thin scrollbar-thumb-white/10 flex gap-3 overflow-x-auto pb-2",children:i.map((d,u)=>e.jsx("button",{type:"button",onClick:()=>x(d),className:y("h-20 w-20 flex-shrink-0 rounded-xl border-2 bg-[#121212] p-2 transition-all",c===d?"border-primary shadow-[0_0_15px_rgba(var(--primary),0.4)]":"border-transparent opacity-60 hover:opacity-90"),children:e.jsx("img",{src:d,alt:`${n} preview ${u+1}`,className:"h-full w-full object-contain"})},u))}),t[3]=n,t[4]=c,t[5]=x,t[6]=i,t[7]=m):m=t[7];let a;return t[8]!==o||t[9]!==m?(a=e.jsxs("div",{className:"space-y-5",children:[o,m]}),t[8]=o,t[9]=m,t[10]=a):a=t[10],a}function pe(r){const t=S.c(14),{file:c,onFileChange:i}=r;let n;t[0]!==i?(n=s=>{s.preventDefault();const p=s.dataTransfer.files[0];p?.type.startsWith("image/")&&i(p)},t[0]=i,t[1]=n):n=t[1];const x=n;let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx(w,{className:"text-xs font-black tracking-widest text-muted-foreground uppercase",children:"Upload Payment Proof"}),t[2]=o):o=t[2];const m=c?"border-green-600/50 bg-green-950/20":"border-white/10 bg-black/20 hover:border-primary/40";let a;t[3]!==m?(a=y("cursor-pointer rounded-2xl border-2 border-dashed p-10 text-center transition-all",m),t[3]=m,t[4]=a):a=t[4];let d;t[5]!==i?(d=e.jsx("input",{type:"file",accept:"image/*",onChange:s=>i(s.target.files?.[0]??null),className:"hidden",id:"receipt-upload"}),t[5]=i,t[6]=d):d=t[6];let u;t[7]!==c?(u=e.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:c?e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"mx-auto h-10 w-10 text-green-500"}),e.jsx("p",{className:"text-sm font-medium text-green-400",children:c.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"mx-auto mb-3 h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-xs font-bold uppercase opacity-60",children:"Drop Screenshot or Click to Browse"})]})}),t[7]=c,t[8]=u):u=t[8];let N;return t[9]!==x||t[10]!==a||t[11]!==d||t[12]!==u?(N=e.jsxs("div",{className:"space-y-2",children:[o,e.jsxs("div",{onDrop:x,onDragOver:xe,className:a,children:[d,u]})]}),t[9]=x,t[10]=a,t[11]=d,t[12]=u,t[13]=N):N=t[13],N}function xe(r){return r.preventDefault()}function he(r){const t=S.c(11),{finalPrice:c,platform:i}=r;let n;t[0]!==i?(n=i.toUpperCase(),t[0]=i,t[1]=n):n=t[1];let x;t[2]!==n?(x=e.jsxs("div",{className:"text-xs font-black tracking-widest uppercase opacity-50",children:["Scan to Pay (",n,")"]}),t[2]=n,t[3]=x):x=t[3];let o;t[4]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx("div",{className:"mx-auto flex justify-center ",children:e.jsx("img",{className:"max-w-68 w-full shadow-inner rounded-2xl ",src:"/assets/qr/qr.jpg",alt:""})}),t[4]=o):o=t[4];let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx("span",{className:"uppercase opacity-70",children:"Total Due"}),t[5]=m):m=t[5];let a;t[6]!==c?(a=e.jsxs("div",{className:"flex items-center justify-between border-t border-white/10 pt-4 text-sm font-semibold",children:[m,e.jsxs("span",{className:"font-mono text-2xl text-primary",children:["$",c]})]}),t[6]=c,t[7]=a):a=t[7];let d;return t[8]!==x||t[9]!==a?(d=e.jsxs("div",{className:"space-y-5 rounded-2xl border border-white/5 bg-black/40 p-6 text-center",children:[x,o,a]}),t[8]=x,t[9]=a,t[10]=d):d=t[10],d}function ue(r){const t=S.c(4),{value:c,onChange:i}=r;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=[{id:"java",label:"Java",icon:se},{id:"bedrock",label:"Bedrock",icon:le}],t[0]=n):n=t[0];const x=n;let o;return t[1]!==i||t[2]!==c?(o=e.jsx(K,{children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(m=>{const{id:a,label:d,icon:u}=m;return e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs("button",{type:"button",onClick:()=>i(a),className:y("flex flex-col items-center gap-2 rounded-xl border p-3 transition-all",c===a?"border-primary bg-primary/10 text-primary shadow-sm":"border-white/5 bg-black/20 text-muted-foreground hover:border-white/20"),children:[e.jsx(u,{size:20}),e.jsx("span",{className:"text-xs font-black uppercase",children:d})]})}),e.jsxs(te,{children:[d," Edition"]})]},a)})})}),t[1]=i,t[2]=c,t[3]=o):o=t[3],o}function _(r){return Number.isFinite(r)?r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function Fe({product:r}){const{flash:t}=G().props,[c,i]=g.useState(!!t?.success),n=g.useMemo(()=>{const l="https://cdn-icons-png.flaticon.com/512/2317/2317997.png",f=r.main_icon_url?`/storage/${r.main_icon_url}`:l,b=r.images?.map(h=>`/storage/${h.image_url}`)??[];return[f,...b].filter((h,R,W)=>W.indexOf(h)===R).length>0?[f,...b]:[l]},[r]),[x,o]=g.useState(n[0]),m=g.useMemo(()=>Number(r.price??0),[r.price]),[a,d]=g.useState(1),u=()=>{a<r.stock&&d(l=>l+1)},N=()=>{a>1&&d(l=>l-1)},s=J({product_id:r.id,minecraft_name:"",platform:"java",promo_code:"",qty:"1",receipt:null});g.useEffect(()=>{s.setData("qty",String(a))},[a]);const[p,k]=g.useState(null),[P,M]=g.useState(!1);g.useEffect(()=>{const l=s.data.promo_code.trim().toUpperCase();if(!l){k(null),s.clearErrors("promo_code");return}const f=setTimeout(async()=>{M(!0);try{const b=await fetch(`${B("checkout.check-coupon")}?code=${encodeURIComponent(l)}`,{headers:{Accept:"application/json"}});if(!b.ok)throw new Error("Network error");const h=await b.json();console.log("Coupon response:",h),h.valid?(k({valid:!0,discount:Number(h.discount)||0,type:h.type||"fixed",min_spend:h.min_spend?Number(h.min_spend):null,message:h.message||"",code:h.code}),s.clearErrors("promo_code")):(k({valid:!1,discount:0,type:"fixed",min_spend:null,message:h.message||"Invalid or expired code",code:h.code}),s.setError("promo_code",h.message||"Invalid code"))}catch{k({valid:!1,discount:0,type:"fixed",min_spend:null,message:"Error checking code. Try again.",code:void 0}),s.setError("promo_code","Network or server error")}finally{M(!1)}},600);return()=>clearTimeout(f)},[s.data.promo_code]);const j=g.useMemo(()=>m*a,[m,a]),$=g.useMemo(()=>{if(!p?.valid)return 0;const{type:l,discount:f,min_spend:b}=p;return b&&j<b?0:l==="percent"?j*(f/100):Math.min(f,j)},[p,j]),D=Math.max(0,j-$),E=g.useMemo(()=>!p?.valid||!p.min_spend?null:j<p.min_spend?`Minimum spend of $${_(p.min_spend)} required to use this coupon.`:null,[p,j]),H=l=>{if(l.preventDefault(),!s.data.minecraft_name.trim()){s.setError("minecraft_name","Minecraft username is required");return}if(!s.data.receipt){s.setError("receipt","Please upload a payment receipt");return}if(r.stock<=0){s.setError("general","Product is out of stock");return}if(a<1||a>r.stock){s.setError("qty",`Quantity must be between 1 and ${r.stock}`);return}s.post(B("payment.store"),{preserveScroll:!0,onSuccess:()=>{i(!0)}})},Q=r.category.name.toLowerCase().includes("base");return e.jsxs(Y,{children:[e.jsx(V,{title:`NOMROTI | ${r.name}`}),e.jsx("main",{className:"container mx-auto mt-8 max-w-7xl px-4 py-8 sm:px-5 sm:py-10 md:px-6 md:py-16",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 md:gap-12 lg:gap-16",children:[e.jsxs("div",{children:[e.jsx(me,{mainImage:x,thumbnails:n,alt:r.name,onThumbClick:o}),r.short_description&&e.jsx("div",{className:"mt-4 text-base leading-relaxed text-zinc-300 whitespace-pre-line",children:r.short_description})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("header",{className:"space-y-3",children:[e.jsx("h1",{className:"text-2xl font-black tracking-tight text-white uppercase italic md:text-3xl lg:text-4xl",children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-baseline gap-3 sm:gap-4",children:[e.jsxs("span",{className:"font-mono text-2xl font-bold text-primary md:text-3xl lg:text-4xl",children:["$",_(D)]}),$>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg text-muted-foreground line-through opacity-70 md:text-xl",children:["$",_(j)]}),e.jsx(U,{className:"border-green-500/40 bg-green-600/30 text-green-400",children:p?.type==="percent"?`-${p.discount}%`:`-$${_($)}`})]}),e.jsx(U,{variant:"outline",className:y(r.stock>0?"border-green-600/40 bg-green-950/30 text-green-400":"border-red-600/40 bg-red-950/30 text-red-400"),children:r.stock>0?`${r.stock} in stock`:"Out of stock"})]}),E&&e.jsx("p",{className:"text-sm font-medium text-amber-400",children:E})]}),Q?e.jsx(v,{asChild:!0,className:"group relative h-16 w-full overflow-hidden rounded-xl bg-primary transition-all hover:ring-2 hover:ring-primary/20 active:scale-[0.98]",children:e.jsxs("a",{href:"https://t.me/nomrotismp",target:"_blank",rel:"noopener noreferrer",children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3",children:[e.jsx(L,{className:"h-5 w-5 transition-transform group-hover:-translate-x-1"}),e.jsx("span",{className:"text-lg font-black tracking-widest uppercase italic",children:"Purchase via Telegram"})]}),e.jsx("div",{className:"absolute inset-0 translate-x-[-100%] bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-500 group-hover:translate-x-[100%]"})]})}):e.jsxs(I,{className:"overflow-hidden border-white/5 bg-[#0f0f0f] shadow-[0_32px_64px_-15px_rgba(0,0,0,0.6)]",children:[e.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-primary/50 via-primary to-transparent"}),e.jsx(q,{className:"px-6 pt-6 md:px-8 md:pt-8",children:e.jsx(z,{className:"text-sm font-black tracking-[0.3em] text-white/90 uppercase",children:"Secure Checkout"})}),e.jsx(F,{className:"space-y-6 p-6 md:p-8",children:e.jsxs("form",{onSubmit:H,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{htmlFor:"qty",className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase",children:"Quantity"}),e.jsxs("div",{className:"flex h-12 items-center rounded-xl border border-white/10 bg-black/40 p-1 transition-colors focus-within:border-primary/50",children:[e.jsx(v,{type:"button",variant:"ghost",size:"icon",className:"h-full w-12 rounded-lg hover:bg-white/5",onClick:N,disabled:a<=1||s.processing,children:e.jsx(re,{size:14})}),e.jsx("input",{id:"qty",type:"number",min:"1",max:r.stock,value:a,onChange:l=>{const f=Number(l.target.value);!isNaN(f)&&f>=1&&f<=r.stock&&d(f)},className:"h-full w-full [appearance:textfield] bg-transparent text-center text-sm font-bold outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",disabled:s.processing||r.stock<=0}),e.jsx(v,{type:"button",variant:"ghost",size:"icon",className:"h-full w-12 rounded-lg hover:bg-white/5",onClick:u,disabled:a>=r.stock||s.processing,children:e.jsx(ae,{size:14})})]}),s.errors.qty&&e.jsx("p",{className:"text-xs font-medium text-red-400",children:s.errors.qty})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{htmlFor:"minecraft_name",className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase",children:"Minecraft Username"}),e.jsxs("div",{className:"group relative",children:[e.jsx(T,{id:"minecraft_name",value:s.data.minecraft_name,onChange:l=>s.setData("minecraft_name",l.target.value.trim()),placeholder:"Enter IGN",className:"h-12 rounded-xl border-white/10 bg-black/40 px-4 transition-all focus:ring-1 focus:ring-primary/40",disabled:s.processing}),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2",children:s.data.minecraft_name.length>2&&!s.errors.minecraft_name&&e.jsx(C,{className:"h-4 w-4 text-green-500"})})]}),s.errors.minecraft_name&&e.jsx("p",{className:"text-xs font-medium text-red-400",children:s.errors.minecraft_name})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase",children:"Platform"}),e.jsx(ue,{value:s.data.platform,onChange:l=>s.setData("platform",l),disabled:s.processing})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{className:"text-[10px] font-black tracking-widest text-muted-foreground uppercase",children:"Promo Code"}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(T,{value:s.data.promo_code,onChange:l=>s.setData("promo_code",l.target.value.toUpperCase()),placeholder:"HAVE A COUPON?",className:y("h-12 rounded-xl border-white/10 bg-black/40 pr-10 transition-all",p?.valid&&"border-green-500/40 bg-green-500/5",p?.valid===!1&&s.data.promo_code&&"border-red-500/40"),disabled:s.processing||P}),e.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2",children:P?e.jsx(A,{className:"h-4 w-4 animate-spin text-muted-foreground"}):p?.valid?e.jsx(C,{className:"h-4 w-4 text-green-500"}):p?.valid===!1&&s.data.promo_code?e.jsx(ne,{className:"h-4 w-4 text-red-500"}):null})]}),e.jsx(v,{type:"button",variant:"secondary",onClick:()=>s.setData("promo_code",s.data.promo_code.trim().toUpperCase()),disabled:s.processing||P||!s.data.promo_code.trim(),className:"h-12 w-full rounded-xl px-8 font-bold tracking-tighter uppercase sm:w-auto sm:px-6",children:"Apply"})]}),p&&e.jsx("p",{className:y("px-1 text-[11px] font-bold",p.valid?"text-green-400":"text-red-400"),children:p.message})]}),e.jsxs("div",{className:"space-y-6 rounded-2xl border border-white/5 bg-white/[0.02] p-6",children:[e.jsx(he,{finalPrice:D,platform:s.data.platform}),e.jsxs("div",{className:"pt-2",children:[e.jsx(pe,{file:s.data.receipt,onFileChange:l=>s.setData("receipt",l),disabled:s.processing}),s.errors.receipt&&e.jsx("p",{className:"mt-2 text-xs font-medium text-red-400",children:s.errors.receipt})]})]}),s.errors.general&&e.jsx("div",{className:"rounded-lg border border-red-500/20 bg-red-500/10 p-3",children:e.jsx("p",{className:"text-center text-xs font-bold tracking-tight text-red-400 uppercase",children:s.errors.general})}),e.jsxs(v,{type:"submit",disabled:s.processing||r.stock<=0,className:"group relative h-16 w-full overflow-hidden rounded-xl bg-primary transition-all hover:ring-2 hover:ring-primary/20 active:scale-[0.98]",children:[e.jsx("div",{className:"relative z-10 flex items-center justify-center gap-3",children:s.processing?e.jsx(A,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-5 w-5 transition-transform group-hover:-translate-x-1"}),e.jsx("span",{className:"text-lg font-black tracking-widest uppercase italic",children:"Confirm & Pay"})]})}),e.jsx("div",{className:"absolute inset-0 translate-x-[-100%] bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-500 group-hover:translate-x-[100%]"})]})]})})]}),r.long_description&&e.jsxs(I,{className:"border-white/5 bg-[#1a1a1a] shadow-xl",children:[e.jsx(q,{children:e.jsx(z,{className:"text-lg font-black uppercase",children:"Product Details"})}),e.jsx(F,{className:"leading-relaxed whitespace-pre-line text-zinc-300",children:r.long_description})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-sm rounded-2xl border border-green-500/30 bg-gradient-to-b from-[#1a2a1a] to-[#121f12] p-8 shadow-2xl sm:max-w-md",children:[e.jsx("button",{onClick:()=>i(!1),className:"absolute top-5 right-5 text-zinc-400 hover:text-white","aria-label":"Close",children:e.jsx(ie,{size:24})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-900/40",children:e.jsx(C,{className:"h-10 w-12 text-green-500"})}),e.jsx("h2",{className:"mb-4 text-3xl font-black text-white",children:"Payment Submitted!"}),e.jsx("p",{className:"mb-8 text-lg text-zinc-300",children:t?.success||"Your receipt has been received. We will verify it shortly and activate your order."}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-center",children:[e.jsx(v,{variant:"outline",onClick:()=>i(!1),className:"border-green-600/50 text-green-400 hover:bg-green-950/50",children:"Close"}),e.jsx(v,{asChild:!0,className:"bg-green-600 hover:bg-green-700",children:e.jsx(X,{href:"/#game-mode",onClick:()=>i(!1),children:"Back to Catalog"})})]})]})]})})]})}export{Fe as default};
