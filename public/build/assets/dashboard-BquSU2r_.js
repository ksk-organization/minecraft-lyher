import{c as Se,r as ye,j as t,a as Re,H as Ue}from"./app-6BxTMT5R.js";import{a as Ae,C as Ie,b as we,c as _e}from"./card-Bn13KvGf.js";import{a as ge,B as C,c as ke}from"./button-BRt5jAio.js";import{I as Ee}from"./input-BKUejJFA.js";import{B as Fe}from"./badge-DUreT1Mz.js";import{b as Y,e as m,a as Oe,c as p,T as ze,d as De,S as qe}from"./table-DaL3ADO8.js";import{d as Me,e as Xe,f as Qe,A as Ve}from"./app-layout-pREgCDPb.js";import{D as Pe,a as Ge,b as $e,c as Je,d as He,e as Le}from"./dialog-D3HJP0Be.js";import{s as Ke}from"./index-BsxvijQw.js";import{E as We,R as Ye}from"./refresh-cw-DDI0UQZb.js";import{C as Ze}from"./check-DvRlG3eW.js";import{X as et}from"./x-BOo7fYJ-.js";import{C as tt}from"./circle-alert-DlPQVRAJ.js";/* empty css            */import"./FlashMessage-Brm0Vrlb.js";import"./index-BR2OjcrM.js";import"./tooltip-Dw1KqEXq.js";import"./index-C8KRFjYd.js";import"./app-logo-icon-COlqCSru.js";import"./package-eKQHEzGj.js";const st=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Te=ge("CircleCheckBig",st);const lt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rt=ge("CircleX",lt);const at=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ce=ge("Clock",at);const nt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],it=ge("DollarSign",nt);function pe(i){const e=Se.c(27),{icon:a,value:h,label:g,color:r}=i,u=r===void 0?"orange":r;let o,x,f,s,c;if(e[0]!==u){const Z={orange:"text-orange-500 bg-orange-950/30",green:"text-green-500 bg-green-950/30",red:"text-red-500 bg-red-950/30"}[u]??"text-gray-400 bg-gray-900/30";x=_e,c="group border-white/5 bg-[#252525] transition-all hover:border-orange-500/50",o=we,s="flex items-center gap-5 p-6",f=ke("rounded-xl p-4",Z,"transition-transform group-hover:scale-105"),e[0]=u,e[1]=o,e[2]=x,e[3]=f,e[4]=s,e[5]=c}else o=e[1],x=e[2],f=e[3],s=e[4],c=e[5];let d;e[6]!==a?(d=t.jsx(a,{size:28}),e[6]=a,e[7]=d):d=e[7];let n;e[8]!==f||e[9]!==d?(n=t.jsx("div",{className:f,children:d}),e[8]=f,e[9]=d,e[10]=n):n=e[10];let j;e[11]!==h?(j=t.jsx("p",{className:"text-3xl font-black",children:h}),e[11]=h,e[12]=j):j=e[12];let b;e[13]!==g?(b=t.jsx("p",{className:"mt-1 text-sm tracking-wide text-muted-foreground uppercase",children:g}),e[13]=g,e[14]=b):b=e[14];let v;e[15]!==j||e[16]!==b?(v=t.jsxs("div",{children:[j,b]}),e[15]=j,e[16]=b,e[17]=v):v=e[17];let y;e[18]!==o||e[19]!==s||e[20]!==n||e[21]!==v?(y=t.jsxs(o,{className:s,children:[n,v]}),e[18]=o,e[19]=s,e[20]=n,e[21]=v,e[22]=y):y=e[22];let N;return e[23]!==x||e[24]!==y||e[25]!==c?(N=t.jsx(x,{className:c,children:y}),e[23]=x,e[24]=y,e[25]=c,e[26]=N):N=e[26],N}function ot(i){const e=Se.c(17),{url:a,isOpen:h,onClose:g}=i;if(!a)return null;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx($e,{children:t.jsx(Pe,{children:"Payment Proof"})}),e[0]=r):r=e[0];const u=`/storage/${a}`;let o;e[1]!==u?(o=t.jsx("img",{src:u,alt:"Payment proof",className:"max-h-[60vh] w-full max-w-2xl rounded-xl border border-white/20 object-contain shadow-2xl"}),e[1]=u,e[2]=o):o=e[2];let x;e[3]!==g?(x=t.jsx(C,{variant:"outline",onClick:g,children:"Close"}),e[3]=g,e[4]=x):x=e[4];const f=`/storage/${a}`;let s;e[5]!==f?(s=t.jsx(C,{variant:"secondary",asChild:!0,children:t.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",children:"Open Original"})}),e[5]=f,e[6]=s):s=e[6];let c;e[7]!==x||e[8]!==s?(c=t.jsxs("div",{className:"flex gap-3 pt-2",children:[x,s]}),e[7]=x,e[8]=s,e[9]=c):c=e[9];let d;e[10]!==o||e[11]!==c?(d=t.jsxs(He,{className:"max-h-[90vh] border-white/10 bg-[#1a1a1a] sm:max-w-3xl",children:[r,t.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[o,c]})]}),e[10]=o,e[11]=c,e[12]=d):d=e[12];let n;return e[13]!==h||e[14]!==g||e[15]!==d?(n=t.jsx(Le,{open:h,onOpenChange:g,children:d}),e[13]=h,e[14]=g,e[15]=d,e[16]=n):n=e[16],n}function Dt(i){const e=Se.c(101),{stats:a,pending_orders:h,history:g}=i,[r,u]=ye.useState(""),[o,x]=ye.useState(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={isOpen:!1,orderId:null,action:null},e[0]=f):f=e[0];const[s,c]=ye.useState(f);let d;if(e[1]!==g||e[2]!==r){let l;e[4]!==r?(l=ee=>ee.user.toLowerCase().includes(r.toLowerCase())||ee.id.toString().includes(r)||ee.item.toLowerCase().includes(r.toLowerCase()),e[4]=r,e[5]=l):l=e[5],d=g.filter(l),e[1]=g,e[2]=r,e[3]=d}else d=e[3];const n=d;let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=(l,ee)=>{c({isOpen:!0,orderId:l,action:ee})},e[6]=j):j=e[6];const b=j,v=mt,y=dt;let N;e[7]!==s.action||e[8]!==s.orderId?(N=()=>{!s.orderId||!s.action||(Re.post(Ke("admin.orders.approve",s.orderId),{orderId:s.orderId,action:s.action},{preserveState:!0,preserveScroll:!0}),c({isOpen:!1,orderId:null,action:null}))},e[7]=s.action,e[8]=s.orderId,e[9]=N):N=e[9];const Z=N;let te;e[10]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(Ue,{title:"Admin Dashboard - NOMROTI"}),e[10]=te):te=e[10];let se;e[11]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:t.jsx("h1",{className:"bg-gradient-to-r from-white to-orange-400 bg-clip-text text-3xl font-black tracking-tight text-transparent md:text-4xl",children:"Admin Dashboard"})}),e[11]=se):se=e[11];let w;e[12]!==a.pending?(w=t.jsx(pe,{icon:Ce,value:a.pending,label:"Pending Orders",color:"orange"}),e[12]=a.pending,e[13]=w):w=e[13];let _;e[14]!==a.revenue?(_=t.jsx(pe,{icon:it,value:a.revenue,label:"Total Revenue"}),e[14]=a.revenue,e[15]=_):_=e[15];let S;e[16]!==a.approved?(S=t.jsx(pe,{icon:Te,value:a.approved,label:"Approved",color:"green"}),e[16]=a.approved,e[17]=S):S=e[17];let k;e[18]!==a.rejected?(k=t.jsx(pe,{icon:rt,value:a.rejected,label:"Rejected",color:"red"}),e[18]=a.rejected,e[19]=k):k=e[19];let A;e[20]!==k||e[21]!==w||e[22]!==_||e[23]!==S?(A=t.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[w,_,S,k]}),e[20]=k,e[21]=w,e[22]=_,e[23]=S,e[24]=A):A=e[24];let le;e[25]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Ce,{size:20}),e[25]=le):le=e[25];let I;e[26]!==h.length?(I=t.jsxs(Ae,{className:"flex items-center gap-2 text-xl font-bold text-orange-500",children:[le,"Pending Approvals (",h.length,")"]}),e[26]=h.length,e[27]=I):I=e[27];let re;e[28]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsxs(C,{variant:"outline",size:"sm",onClick:v,className:"gap-1.5",children:[t.jsx(Ye,{size:16,className:"animate-spin-slow"}),"Refresh"]}),e[28]=re):re=e[28];let O;e[29]!==I?(O=t.jsxs(Ie,{className:"flex-row items-center justify-between border-b border-white/5 pb-4",children:[I,re]}),e[29]=I,e[30]=O):O=e[30];let ae;e[31]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Oe,{children:t.jsxs(Y,{className:"hover:bg-transparent",children:[t.jsx(p,{children:"ID"}),t.jsx(p,{children:"User"}),t.jsx(p,{children:"Product"}),t.jsx(p,{children:"Qty"}),t.jsx(p,{children:"Price"}),t.jsx(p,{children:"Proof"}),t.jsx(p,{children:"Time"}),t.jsx(p,{className:"text-right",children:"Actions"})]})}),e[31]=ae):ae=e[31];let z;e[32]!==h?(z=h.length===0?t.jsx(Y,{children:t.jsx(m,{colSpan:8,className:"h-32 py-10 text-center text-muted-foreground",children:"No pending orders ðŸŽ‰"})}):h.map(l=>t.jsxs(Y,{className:"border-b border-white/5 hover:bg-white/5",children:[t.jsxs(m,{className:"font-mono text-sm",children:["#",l.id]}),t.jsx(m,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(Me,{className:"h-10 w-10",children:[t.jsx(Xe,{src:l.avatar}),t.jsx(Qe,{className:"bg-orange-950/50 font-bold text-orange-400",children:l.minecraft_username.slice(0,2).toUpperCase()})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold",children:l.minecraft_username}),t.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:l.platform})]})]})}),t.jsx(m,{className:"font-medium",children:l.product?.name||"N/A"}),t.jsx(m,{className:"font-bold text-orange-400",children:l.qty}),t.jsx(m,{className:"font-mono text-lg font-bold text-orange-500",children:y(l.total)}),t.jsx(m,{children:l.attachment_url?t.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>x(l.attachment_url),className:"h-9 gap-1.5 px-3",children:[t.jsx(We,{size:14}),"View Proof"]}):t.jsx("span",{className:"rounded-md bg-red-950/50 px-2 py-1 text-xs text-muted-foreground",children:"No proof"})}),t.jsx(m,{className:"text-xs text-muted-foreground",children:new Date(l.created_at).toLocaleString()}),t.jsxs(m,{className:"space-x-1 text-right",children:[t.jsx(C,{size:"icon",variant:"ghost",className:"h-9 w-9 text-green-500 hover:bg-green-950/40",onClick:()=>b(l.id,"approve"),title:"Approve Order",children:t.jsx(Ze,{size:16})}),t.jsx(C,{size:"icon",variant:"ghost",className:"h-9 w-9 text-red-500 hover:bg-red-950/40",onClick:()=>b(l.id,"reject"),title:"Reject Order",children:t.jsx(et,{size:16})})]})]},l.id)),e[32]=h,e[33]=z):z=e[33];let D;e[34]!==z?(D=t.jsx(we,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(ze,{children:[ae,t.jsx(De,{children:z})]})})}),e[34]=z,e[35]=D):D=e[35];let T;e[36]!==O||e[37]!==D?(T=t.jsxs(_e,{className:"border-white/5 bg-[#252525]",children:[O,D]}),e[36]=O,e[37]=D,e[38]=T):T=e[38];let ne;e[39]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(Ce,{size:20}),e[39]=ne):ne=e[39];let R;e[40]!==n.length?(R=t.jsxs(Ae,{className:"flex items-center gap-2 text-xl font-bold",children:[ne,"Recent History (",n.length,")"]}),e[40]=n.length,e[41]=R):R=e[41];let ie;e[42]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(qe,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[42]=ie):ie=e[42];let oe;e[43]===Symbol.for("react.memo_cache_sentinel")?(oe=l=>u(l.target.value),e[43]=oe):oe=e[43];let P;e[44]!==r?(P=t.jsxs("div",{className:"relative w-72 md:w-96",children:[ie,t.jsx(Ee,{placeholder:"Search users, orders, items...",className:"h-10 border-white/10 bg-black/30 pl-10",value:r,onChange:oe})]}),e[44]=r,e[45]=P):P=e[45];let $;e[46]!==R||e[47]!==P?($=t.jsxs(Ie,{className:"flex-row items-center justify-between border-b border-white/5 pb-4",children:[R,P]}),e[46]=R,e[47]=P,e[48]=$):$=e[48];let ce;e[49]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Oe,{children:t.jsxs(Y,{className:"hover:bg-transparent",children:[t.jsx(p,{children:"ID"}),t.jsx(p,{children:"User"}),t.jsx(p,{children:"Item"}),t.jsx(p,{children:"Amount"}),t.jsx(p,{children:"Status"}),t.jsx(p,{children:"Staff"}),t.jsx(p,{children:"Time"})]})}),e[49]=ce):ce=e[49];let H;e[50]!==n||e[51]!==r?(H=n.length===0?t.jsx(Y,{children:t.jsx(m,{colSpan:7,className:"h-24 py-10 text-center text-muted-foreground",children:r?"No matching records":"No history yet"})}):n.map(ct),e[50]=n,e[51]=r,e[52]=H):H=e[52];let L;e[53]!==H?(L=t.jsx(we,{className:"p-0",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(ze,{children:[ce,t.jsx(De,{children:H})]})})}),e[53]=H,e[54]=L):L=e[54];let B;e[55]!==$||e[56]!==L?(B=t.jsxs(_e,{className:"border-white/5 bg-[#252525]",children:[$,L]}),e[55]=$,e[56]=L,e[57]=B):B=e[57];let U;e[58]!==A||e[59]!==T||e[60]!==B?(U=t.jsxs("div",{className:"space-y-8 p-4 md:p-6 lg:p-8",children:[se,A,T,B]}),e[58]=A,e[59]=T,e[60]=B,e[61]=U):U=e[61];const je=!!o;let de;e[62]===Symbol.for("react.memo_cache_sentinel")?(de=()=>x(null),e[62]=de):de=e[62];let E;e[63]!==o||e[64]!==je?(E=t.jsx(ot,{url:o,isOpen:je,onClose:de}),e[63]=o,e[64]=je,e[65]=E):E=e[65];const Be=s.isOpen;let me;e[66]===Symbol.for("react.memo_cache_sentinel")?(me=l=>{l||c({isOpen:!1,orderId:null,action:null})},e[66]=me):me=e[66];let F;e[67]!==s.action?(F=s.action==="approve"?t.jsx(Te,{className:"h-5 w-5 text-green-500"}):t.jsx(tt,{className:"h-5 w-5 text-red-500"}),e[67]=s.action,e[68]=F):F=e[68];const ue=s.action==="approve"?"Approval":"Rejection";let q;e[69]!==F||e[70]!==ue?(q=t.jsxs(Pe,{className:"flex items-center gap-2 text-lg",children:[F,"Confirm"," ",ue]}),e[69]=F,e[70]=ue,e[71]=q):q=e[71];let M;e[72]!==s.action?(M=t.jsx("strong",{children:s.action}),e[72]=s.action,e[73]=M):M=e[73];let X;e[74]!==s.orderId?(X=t.jsx("span",{className:"font-mono text-orange-400",children:s.orderId}),e[74]=s.orderId,e[75]=X):X=e[75];let xe;e[76]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("br",{}),e[76]=xe):xe=e[76];let Q;e[77]!==M||e[78]!==X?(Q=t.jsxs(Ge,{className:"pt-2 text-zinc-400",children:["Are you sure you want to"," ",M," order #",X,"?",xe,"This action cannot be undone."]}),e[77]=M,e[78]=X,e[79]=Q):Q=e[79];let V;e[80]!==q||e[81]!==Q?(V=t.jsxs($e,{children:[q,Q]}),e[80]=q,e[81]=Q,e[82]=V):V=e[82];let he;e[83]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(C,{variant:"outline",onClick:()=>c({isOpen:!1,orderId:null,action:null}),className:"border-zinc-700 hover:bg-zinc-800",children:"Cancel"}),e[83]=he):he=e[83];const be=s.action==="approve"?"default":"destructive",Ne=s.action==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700";let G;e[84]!==Ne?(G=ke("min-w-[140px]",Ne),e[84]=Ne,e[85]=G):G=e[85];const ve=s.action==="approve"?"Approve Order":"Reject Order";let J;e[86]!==Z||e[87]!==be||e[88]!==G||e[89]!==ve?(J=t.jsxs(Je,{className:"mt-6 gap-3 sm:gap-4",children:[he,t.jsx(C,{variant:be,onClick:Z,className:G,children:ve})]}),e[86]=Z,e[87]=be,e[88]=G,e[89]=ve,e[90]=J):J=e[90];let K;e[91]!==V||e[92]!==J?(K=t.jsxs(He,{className:"border-zinc-800 bg-zinc-950 sm:max-w-md",children:[V,J]}),e[91]=V,e[92]=J,e[93]=K):K=e[93];let W;e[94]!==s.isOpen||e[95]!==K?(W=t.jsx(Le,{open:Be,onOpenChange:me,children:K}),e[94]=s.isOpen,e[95]=K,e[96]=W):W=e[96];let fe;return e[97]!==U||e[98]!==E||e[99]!==W?(fe=t.jsxs(Ve,{children:[te,U,E,W]}),e[97]=U,e[98]=E,e[99]=W,e[100]=fe):fe=e[100],fe}function ct(i){return t.jsxs(Y,{className:"border-b border-white/5 hover:bg-white/5",children:[t.jsxs(m,{className:"font-mono text-sm",children:["#",i.id]}),t.jsx(m,{className:"font-medium",children:i.user}),t.jsx(m,{className:"max-w-xs truncate",children:i.item}),t.jsxs(m,{className:"font-mono font-bold",children:["$",Number(i.amount).toFixed(2)]}),t.jsx(m,{children:t.jsx(Fe,{variant:["Paid","Completed"].includes(i.status)?"default":"destructive",className:ke(["Paid","Completed"].includes(i.status)?"border-green-600/40 bg-green-600/30 text-green-300":"border-red-600/40 bg-red-600/30 text-red-300","transition-transform hover:scale-105"),children:i.status})}),t.jsx(m,{className:"text-muted-foreground",children:i.staff}),t.jsx(m,{className:"text-xs text-muted-foreground",children:i.time})]},i.id)}function dt(i){const e=Number(i);return Number.isFinite(e)?`$${e.toLocaleString("en-US",{minimumFractionDigits:2})}`:"$0.00"}function mt(){Re.reload({only:["pending_orders","history","stats"]})}export{Dt as default};
