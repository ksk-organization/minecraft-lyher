const le=String.prototype.replace,se=/%20/g,W={RFC1738:"RFC1738",RFC3986:"RFC3986"},z={RFC1738:function(l){return le.call(l,se,"+")},RFC3986:function(l){return String(l)}},ae=W.RFC1738,G=W.RFC3986,F=Object.prototype.hasOwnProperty,$=Array.isArray,N=new WeakMap;var J=function(e,t){return N.set(e,t),e};function R(l){return N.has(l)}var K=function(e){return N.get(e)},X=function(e,t){N.set(e,t)};const j=(function(){const l=[];for(let e=0;e<256;++e)l.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return l})(),ce=function(e){for(;e.length>1;){const t=e.pop(),n=t.obj[t.prop];if($(n)){const r=[];for(let o=0;o<n.length;++o)typeof n[o]<"u"&&r.push(n[o]);t.obj[t.prop]=r}}},Y=function(e,t){const n=t&&t.plainObjects?Object.create(null):{};for(let r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},ue=function l(e,t,n){if(!t)return e;if(typeof t!="object"){if($(e))e.push(t);else if(e&&typeof e=="object")if(R(e)){var r=K(e)+1;e[r]=t,X(e,r)}else(n&&(n.plainObjects||n.allowPrototypes)||!F.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object"){if(R(t)){for(var o=Object.keys(t),i=n&&n.plainObjects?{__proto__:null,0:e}:{0:e},u=0;u<o.length;u++){var c=parseInt(o[u],10);i[c+1]=t[o[u]]}return J(i,K(t)+1)}return[e].concat(t)}let f=e;return $(e)&&!$(t)&&(f=Y(e,n)),$(e)&&$(t)?(t.forEach(function(s,d){if(F.call(e,d)){const a=e[d];a&&typeof a=="object"&&s&&typeof s=="object"?e[d]=l(a,s,n):e.push(s)}else e[d]=s}),e):Object.keys(t).reduce(function(s,d){const a=t[d];return F.call(s,d)?s[d]=l(s[d],a,n):s[d]=a,s},f)},fe=function(l,e,t){const n=l.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},_=1024,de=function(e,t,n,r,o){if(e.length===0)return e;let i=e;if(typeof e=="symbol"?i=Symbol.prototype.toString.call(e):typeof e!="string"&&(i=String(e)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let u="";for(let c=0;c<i.length;c+=_){const f=i.length>=_?i.slice(c,c+_):i,s=[];for(let d=0;d<f.length;++d){let a=f.charCodeAt(d);if(a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||o===ae&&(a===40||a===41)){s[s.length]=f.charAt(d);continue}if(a<128){s[s.length]=j[a];continue}if(a<2048){s[s.length]=j[192|a>>6]+j[128|a&63];continue}if(a<55296||a>=57344){s[s.length]=j[224|a>>12]+j[128|a>>6&63]+j[128|a&63];continue}d+=1,a=65536+((a&1023)<<10|f.charCodeAt(d)&1023),s[s.length]=j[240|a>>18]+j[128|a>>12&63]+j[128|a>>6&63]+j[128|a&63]}u+=s.join("")}return u},ye=function(e){const t=[{obj:{o:e},prop:"o"}],n=[];for(let r=0;r<t.length;++r){const o=t[r],i=o.obj[o.prop],u=Object.keys(i);for(let c=0;c<u.length;++c){const f=u[c],s=i[f];typeof s=="object"&&s!==null&&n.indexOf(s)===-1&&(t.push({obj:i,prop:f}),n.push(s))}}return ce(t),e},he=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ee=function(e,t,n,r){if(R(e)){var o=K(e)+1;return e[o]=t,X(e,o),e}var i=[].concat(e,t);return i.length>n?J(Y(i,{plainObjects:r}),i.length-1):i},U=function(e,t){if($(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},pe=Object.prototype.hasOwnProperty,te={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},O=Array.isArray,me=Array.prototype.push,ne=function(l,e){me.apply(l,O(e)?e:[e])},ge=Date.prototype.toISOString,V=G,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:de,encodeValuesOnly:!1,format:V,formatter:z[V],indices:!1,serializeDate:function(e){return ge.call(e)},skipNulls:!1,strictNullHandling:!1},be=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Q={},re=function(e,t,n,r,o,i,u,c,f,s,d,a,p,h,w,x,k,D){let y=e,E=D,A=0,M=!1;for(;(E=E.get(Q))!==void 0&&!M;){const g=E.get(e);if(A+=1,typeof g<"u"){if(g===A)throw new RangeError("Cyclic object value");M=!0}typeof E.get(Q)>"u"&&(A=0)}if(typeof s=="function"?y=s(t,y):y instanceof Date?y=p(y):n==="comma"&&O(y)&&(y=U(y,function(g){return g instanceof Date?p(g):g})),y===null){if(i)return f&&!x?f(t,m.encoder,k,"key",h):t;y=""}if(be(y)||he(y)){if(f){const g=x?t:f(t,m.encoder,k,"key",h);return[w(g)+"="+w(f(y,m.encoder,k,"value",h))]}return[w(t)+"="+w(String(y))]}const C=[];if(typeof y>"u")return C;let v;if(n==="comma"&&O(y))x&&f&&(y=U(y,f)),v=[{value:y.length>0?y.join(",")||null:void 0}];else if(O(s))v=s;else{const g=Object.keys(y);v=d?g.sort(d):g}const Z=c?t.replace(/\./g,"%2E"):t,P=r&&O(y)&&y.length===1?Z+"[]":Z;if(o&&O(y)&&y.length===0)return P+"[]";for(let g=0;g<v.length;++g){const S=v[g],H=typeof S=="object"&&typeof S.value<"u"?S.value:y[S];if(u&&H===null)continue;const T=a&&c?S.replace(/\./g,"%2E"):S,oe=O(y)?typeof n=="function"?n(P,T):P:P+(a?"."+T:"["+T+"]");D.set(e,A);const L=new WeakMap;L.set(Q,D),ne(C,re(H,oe,n,r,o,i,u,c,n==="comma"&&x&&O(y)?null:f,s,d,a,p,h,w,x,k,L))}return C},we=function(e){if(!e)return m;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||m.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=G;if(typeof e.format<"u"){if(!pe.call(z,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=z[n];let o=m.filter;(typeof e.filter=="function"||O(e.filter))&&(o=e.filter);let i;if(e.arrayFormat in te?i=e.arrayFormat:"indices"in e?i=e.indices?"indices":"repeat":i=m.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:m.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:m.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:i,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:m.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?m.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:m.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:m.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:m.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:m.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:m.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:m.strictNullHandling}};function je(l,e){let t=l;const n=we(e);let r,o;typeof n.filter=="function"?(o=n.filter,t=o("",t)):O(n.filter)&&(o=n.filter,r=o);const i=[];if(typeof t!="object"||t===null)return"";const u=te[n.arrayFormat],c=u==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const f=new WeakMap;for(let a=0;a<r.length;++a){const p=r[a];n.skipNulls&&t[p]===null||ne(i,re(t[p],p,u,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}const s=i.join(n.delimiter);let d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),s.length>0?d+s:""}const B=Object.prototype.hasOwnProperty,Oe=Array.isArray,I={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:fe,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},xe=function(l){return l.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},ie=function(l,e){return l&&typeof l=="string"&&e.comma&&l.indexOf(",")>-1?l.split(","):l},$e="utf8=%26%2310003%3B",Se="utf8=%E2%9C%93",ve=function(e,t){const n={__proto__:null},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o);let u=-1,c,f=t.charset;if(t.charsetSentinel)for(c=0;c<i.length;++c)i[c].indexOf("utf8=")===0&&(i[c]===Se?f="utf-8":i[c]===$e&&(f="iso-8859-1"),u=c,c=i.length);for(c=0;c<i.length;++c){if(c===u)continue;const s=i[c],d=s.indexOf("]="),a=d===-1?s.indexOf("="):d+1;let p,h;a===-1?(p=t.decoder(s,I.decoder,f,"key"),h=t.strictNullHandling?null:""):(p=t.decoder(s.slice(0,a),I.decoder,f,"key"),h=U(ie(s.slice(a+1),t),function(x){return t.decoder(x,I.decoder,f,"value")})),h&&t.interpretNumericEntities&&f==="iso-8859-1"&&(h=xe(h)),s.indexOf("[]=")>-1&&(h=Oe(h)?[h]:h);const w=B.call(n,p);w&&t.duplicates==="combine"?n[p]=ee(n[p],h,t.arrayLimit,t.plainObjects):(!w||t.duplicates==="last")&&(n[p]=h)}return n},ke=function(l,e,t,n){let r=n?e:ie(e,t);for(let o=l.length-1;o>=0;--o){let i;const u=l[o];if(u==="[]"&&t.parseArrays)R(r)?i=r:i=t.allowEmptyArrays&&(r===""||t.strictNullHandling&&r===null)?[]:ee([],r,t.arrayLimit,t.plainObjects);else{i=t.plainObjects?Object.create(null):{};const c=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,f=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,s=parseInt(f,10);!t.parseArrays&&f===""?i={0:r}:!isNaN(s)&&u!==f&&String(s)===f&&s>=0&&t.parseArrays&&s<=t.arrayLimit?(i=[],i[s]=r):f!=="__proto__"&&(i[f]=r)}r=i}return r},Ee=function(e,t,n,r){if(!e)return;const o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g;let c=n.depth>0&&i.exec(o);const f=c?o.slice(0,c.index):o,s=[];if(f){if(!n.plainObjects&&B.call(Object.prototype,f)&&!n.allowPrototypes)return;s.push(f)}let d=0;for(;n.depth>0&&(c=u.exec(o))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&B.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(c[1])}return c&&s.push("["+o.slice(c.index)+"]"),ke(s,t,n,r)},Ae=function(e){return I};function Pe(l,e){const t=Ae();if(l===""||l===null||typeof l>"u")return t.plainObjects?Object.create(null):{};const n=typeof l=="string"?ve(l,t):l;let r=t.plainObjects?Object.create(null):{};const o=Object.keys(n);for(let i=0;i<o.length;++i){const u=o[i],c=Ee(u,n[u],t,typeof l=="string");r=ue(r,c,t)}return t.allowSparse===!0?r:ye(r)}function b(){return b=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},b.apply(null,arguments)}class q{constructor(e,t,n){var r,o;this.name=e,this.definition=t,this.bindings=(r=t.bindings)!=null?r:{},this.wheres=(o=t.wheres)!=null?o:{},this.config=n}get template(){const e=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return e===""?"/":e}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var e,t;return(e=(t=this.template.match(/{[^}?]+\??}/g))==null?void 0:t.map(n=>({name:n.replace(/{|\??}/g,""),required:!/\?}$/.test(n)})))!=null?e:[]}matchesUrl(e){var t;if(!this.definition.methods.includes("GET"))return!1;const n=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(u,c,f,s)=>{var d;const a=`(?<${f}>${((d=this.wheres[f])==null?void 0:d.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return s?`(${c}${a})?`:`${c}${a}`}).replace(/^\w+:\/\//,""),[r,o]=e.replace(/^\w+:\/\//,"").split("?"),i=(t=new RegExp(`^${n}/?$`).exec(r))!=null?t:new RegExp(`^${n}/?$`).exec(decodeURI(r));if(i){for(const u in i.groups)i.groups[u]=typeof i.groups[u]=="string"?decodeURIComponent(i.groups[u]):i.groups[u];return{params:i.groups,query:Pe(o)}}return!1}compile(e){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(t,n,r)=>{var o,i;if(!r&&[null,void 0].includes(e[n]))throw new Error(`Ziggy error: '${n}' parameter is required for route '${this.name}'.`);if(this.wheres[n]&&!new RegExp(`^${r?`(${this.wheres[n]})?`:this.wheres[n]}$`).test((i=e[n])!=null?i:""))throw new Error(`Ziggy error: '${n}' parameter '${e[n]}' does not match required format '${this.wheres[n]}' for route '${this.name}'.`);return encodeURI((o=e[n])!=null?o:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class Ie extends String{constructor(e,t,n=!0,r){if(super(),this.t=r??(typeof Ziggy<"u"?Ziggy:globalThis?.Ziggy),!this.t&&typeof document<"u"&&document.getElementById("ziggy-routes-json")&&(globalThis.Ziggy=JSON.parse(document.getElementById("ziggy-routes-json").textContent),this.t=globalThis.Ziggy),this.t=b({},this.t,{absolute:n}),e){if(!this.t.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this.i=new q(e,this.t.routes[e],this.t),this.o=this.u(t)}}toString(){const e=Object.keys(this.o).filter(t=>!this.i.parameterSegments.some(({name:n})=>n===t)).filter(t=>t!=="_query").reduce((t,n)=>b({},t,{[n]:this.o[n]}),{});return this.i.compile(this.o)+je(b({},e,this.o._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(t,n)=>typeof t=="boolean"?Number(t):n(t)})}h(e){e?this.t.absolute&&e.startsWith("/")&&(e=this.l().host+e):e=this.m();let t={};const[n,r]=Object.entries(this.t.routes).find(([o,i])=>t=new q(o,i,this.t).matchesUrl(e))||[void 0,void 0];return b({name:n},t,{route:r})}m(){const{host:e,pathname:t,search:n}=this.l();return(this.t.absolute?e+t:t.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+n}current(e,t){const{name:n,params:r,query:o,route:i}=this.h();if(!e)return n;const u=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(n);if([null,void 0].includes(t)||!u)return u;const c=new q(n,i,this.t);t=this.u(t,c);const f=b({},r,o);if(Object.values(t).every(d=>!d)&&!Object.values(f).some(d=>d!==void 0))return!0;const s=(d,a)=>Object.entries(d).every(([p,h])=>Array.isArray(h)&&Array.isArray(a[p])?h.every(w=>a[p].includes(w)||a[p].includes(decodeURIComponent(w))):typeof h=="object"&&typeof a[p]=="object"&&h!==null&&a[p]!==null?s(h,a[p]):a[p]==h||a[p]==decodeURIComponent(h));return s(t,f)}l(){var e,t,n,r,o,i;const{host:u="",pathname:c="",search:f=""}=typeof window<"u"?window.location:{};return{host:(e=(t=this.t.location)==null?void 0:t.host)!=null?e:u,pathname:(n=(r=this.t.location)==null?void 0:r.pathname)!=null?n:c,search:(o=(i=this.t.location)==null?void 0:i.search)!=null?o:f}}get params(){const{params:e,query:t}=this.h();return b({},e,t)}get routeParams(){return this.h().params}get queryParams(){return this.h().query}has(e){return this.t.routes.hasOwnProperty(e)}u(e={},t=this.i){e!=null||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const n=t.parameterSegments.filter(({name:r})=>!this.t.defaults[r]);return Array.isArray(e)?e=e.reduce((r,o,i)=>b({},r,n[i]?{[n[i].name]:o}:typeof o=="object"?o:{[o]:""}),{}):n.length!==1||e[n[0].name]||!e.hasOwnProperty(Object.values(t.bindings)[0])&&!e.hasOwnProperty("id")||(e={[n[0].name]:e}),b({},this.p(t),this.$(e,t))}p(e){return e.parameterSegments.filter(({name:t})=>this.t.defaults[t]).reduce((t,{name:n},r)=>b({},t,{[n]:this.t.defaults[n]}),{})}$(e,{bindings:t,parameterSegments:n}){return Object.entries(e).reduce((r,[o,i])=>{if(!i||typeof i!="object"||Array.isArray(i)||!n.some(({name:u})=>u===o))return b({},r,{[o]:i});if(!i.hasOwnProperty(t[o])){if(!i.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${o}' parameter is missing route model binding key '${t[o]}'.`);t[o]="id"}return b({},r,{[o]:i[t[o]]})},{})}valueOf(){return this.toString()}}function Re(l,e,t,n){const r=new Ie(l,e,t,n);return l?r.toString():r}export{Re as s};
