import{c as ts,r as We,u as ds,j as t,a as qe,H as ms}from"./app-Dwn51N-w.js";import{n as oe}from"./FlashMessage-Bp6vArOS.js";import{a as ps,B as p,c as xs}from"./button-CJ6Mfk7i.js";import{C as Ke,a as Qe,b as Xe,c as Ye}from"./card-BKfPBS5d.js";import{T as hs,a as us,b as Ze,c as d,d as fs,e as m,S as gs}from"./table-QSneVqxS.js";import{B as js}from"./badge-D10AgWJK.js";import{I as ie}from"./input-CUnRFWPQ.js";import{L as x}from"./label-DaDYt8YX.js";import{D as vs,a as bs,b as _s,c as ys,d as Cs,e as Ns}from"./dialog-B4bRcMak.js";import{S as Ss,a as Ds,b as ws,c as Ts,d as es}from"./select-CYMwwyPp.js";import{S as Es}from"./switch-DBkC492l.js";import{D as ks,a as Ms,b as Fs,c as ss,A as zs}from"./app-layout-6o4Shd5C.js";import{s as $e}from"./index-BsxvijQw.js";import{C as $s}from"./copy-DlsWviQs.js";import{P as Is,T as As}from"./trash-2-qBXQKHDi.js";import{P as Bs}from"./plus-DK41E0tr.js";/* empty css            */import"./index-lK9S_p9Z.js";import"./x-CVqSb7LO.js";import"./index-BBgqV94f.js";import"./tooltip-Bfr93aow.js";import"./index-Bbzh71FQ.js";import"./check-5gAGwT_n.js";import"./app-logo-icon-VvcVzNx3.js";import"./package-D91LQJxn.js";const Hs=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ls=ps("Ellipsis",Hs);function Us(a){return a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}function Os(a){const e=ts.c(3),{active:l}=a,c=l?"default":"secondary",o=l?"Active":"Inactive";let h;return e[0]!==c||e[1]!==o?(h=t.jsx(js,{variant:c,className:"font-medium",children:o}),e[0]=c,e[1]=o,e[2]=h):h=e[2],h}function jt(a){const e=ts.c(165),{coupons:l,filters:c}=a;let o;e[0]!==c?(o=c===void 0?{}:c,e[0]=c,e[1]=o):o=e[1];const h=o,[i,Ge]=We.useState(h.search||""),[Ie,ne]=We.useState(!1),[ce,Je]=We.useState(null);let de;e[2]===Symbol.for("react.memo_cache_sentinel")?(de={code:"",type:"fixed",value:"",min_spend:"",max_uses:"",expires_at:"",is_active:!0},e[2]=de):de=e[2];const s=ds(de),n=!!ce;let me;e[3]!==s?(me=()=>{s.reset(),Je(null),ne(!0)},e[3]=s,e[4]=me):me=e[4];const Ae=me;let pe;e[5]!==s?(pe=r=>{Je(r),s.setData({code:r.code,type:r.type,value:r.value,min_spend:r.min_spend??"",max_uses:r.max_uses??"",expires_at:r.expires_at?r.expires_at.split("T")[0]:"",is_active:r.is_active??!0}),ne(!0)},e[5]=s,e[6]=pe):pe=e[6];const Be=pe;let xe;e[7]!==ce||e[8]!==s||e[9]!==n?(xe=r=>{r.preventDefault();const ns=n?"admin.coupons.update":"admin.coupons.store",cs=n?"put":"post",os=n?[ce.id]:[];s[cs]($e(ns,...os),{preserveScroll:!0,onSuccess:()=>{oe.success(n?"Coupon updated":"Coupon created"),ne(!1),s.reset()},onError:qs})},e[7]=ce,e[8]=s,e[9]=n,e[10]=xe):xe=e[10];const He=xe,rs=Vs,as=Ps;let he;e[11]!==i?(he=r=>{r.preventDefault(),qe.get($e("admin.coupons.index"),{search:i.trim()||void 0},{preserveState:!0,replace:!0})},e[11]=i,e[12]=he):he=e[12];const Le=he;let ue;e[13]===Symbol.for("react.memo_cache_sentinel")?(ue=()=>{Ge(""),qe.get($e("admin.coupons.index"),{},{preserveState:!0})},e[13]=ue):ue=e[13];const ls=ue;let fe;e[14]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ms,{title:"Admin | Coupons"}),e[14]=fe):fe=e[14];let ge;e[15]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-black tracking-tight",children:"Coupon Management"}),t.jsx("p",{className:"mt-1.5 text-muted-foreground",children:"Create and manage discount codes for your store"})]}),e[15]=ge):ge=e[15];let je;e[16]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(Bs,{size:18}),e[16]=je):je=e[16];let u;e[17]!==Ae?(u=t.jsxs("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between",children:[ge,t.jsxs(p,{onClick:Ae,size:"lg",className:"gap-2",children:[je,"New Coupon"]})]}),e[17]=Ae,e[18]=u):u=e[18];let ve;e[19]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(Ke,{className:"pb-4",children:t.jsx(Qe,{className:"text-lg",children:"Filter Coupons"})}),e[19]=ve):ve=e[19];let be;e[20]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(gs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[20]=be):be=e[20];let _e;e[21]===Symbol.for("react.memo_cache_sentinel")?(_e=r=>Ge(r.target.value),e[21]=_e):_e=e[21];let f;e[22]!==i?(f=t.jsxs("div",{className:"relative min-w-[240px] flex-1",children:[be,t.jsx(ie,{placeholder:"Search by code...",className:"pl-10 bg-black/40 border-white/10",value:i,onChange:_e})]}),e[22]=i,e[23]=f):f=e[23];let ye;e[24]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(p,{type:"submit",children:"Search"}),e[24]=ye):ye=e[24];let g;e[25]!==i?(g=i&&t.jsx(p,{variant:"ghost",onClick:ls,children:"Clear"}),e[25]=i,e[26]=g):g=e[26];let j;e[27]!==Le||e[28]!==f||e[29]!==g?(j=t.jsxs(Ye,{className:"border-white/10 bg-[#121212]",children:[ve,t.jsx(Xe,{className:"pb-4",children:t.jsxs("form",{onSubmit:Le,className:"flex flex-wrap gap-3",children:[f,ye,g]})})]}),e[27]=Le,e[28]=f,e[29]=g,e[30]=j):j=e[30];let v;e[31]!==l.length?(v=t.jsx(Ke,{className:"border-b border-white/5",children:t.jsxs(Qe,{children:["Coupons (",l.length,")"]})}),e[31]=l.length,e[32]=v):v=e[32];let b;e[33]!==l||e[34]!==Be?(b=t.jsx(Xe,{className:"p-0",children:l.length===0?t.jsxs("div",{className:"py-20 text-center text-muted-foreground",children:[t.jsx("p",{className:"text-lg font-medium",children:"No coupons found"}),t.jsx("p",{className:"mt-2",children:"Create your first coupon to start offering discounts."})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(hs,{children:[t.jsx(us,{children:t.jsxs(Ze,{className:"hover:bg-transparent border-b border-white/5",children:[t.jsx(d,{children:"Code"}),t.jsx(d,{children:"Type"}),t.jsx(d,{children:"Value"}),t.jsx(d,{children:"Min Spend"}),t.jsx(d,{children:"Uses"}),t.jsx(d,{children:"Expires"}),t.jsx(d,{children:"Status"}),t.jsx(d,{className:"text-right pr-6",children:"Actions"})]})}),t.jsx(fs,{children:l.map(r=>t.jsxs(Ze,{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[t.jsx(m,{className:"font-medium",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono",children:r.code}),t.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>as(r.code),title:"Copy code",children:t.jsx($s,{size:14})})]})}),t.jsx(m,{className:"capitalize",children:r.type}),t.jsx(m,{children:r.type==="percent"?`${r.value}%`:`$${r.value}`}),t.jsx(m,{children:r.min_spend?`$${r.min_spend}`:"—"}),t.jsxs(m,{children:[r.used_count," / ",r.max_uses??"∞"]}),t.jsx(m,{children:Us(r.expires_at)}),t.jsx(m,{children:t.jsx(Os,{active:r.is_active})}),t.jsx(m,{className:"text-right pr-4",children:t.jsxs(ks,{children:[t.jsx(Ms,{asChild:!0,children:t.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(Ls,{size:16})})}),t.jsxs(Fs,{align:"end",className:"bg-[#1a1a1a] border-white/10",children:[t.jsxs(ss,{onClick:()=>Be(r),className:"gap-2 cursor-pointer",children:[t.jsx(Is,{size:16}),"Edit"]}),t.jsxs(ss,{className:"gap-2 text-destructive cursor-pointer focus:text-destructive",onClick:()=>rs(r.id),children:[t.jsx(As,{size:16}),"Delete"]})]})]})})]},r.id))})]})})}),e[33]=l,e[34]=Be,e[35]=b):b=e[35];let _;e[36]!==v||e[37]!==b?(_=t.jsxs(Ye,{className:"border-white/10 bg-[#121212] overflow-hidden",children:[v,b]}),e[36]=v,e[37]=b,e[38]=_):_=e[38];const Ue=n?`Edit ${ce?.code}`:"Create Coupon";let y;e[39]!==Ue?(y=t.jsx(vs,{className:"text-xl",children:Ue}),e[39]=Ue,e[40]=y):y=e[40];const Oe=n?"Modify the discount settings.":"Define a new discount code for your players.";let C;e[41]!==Oe?(C=t.jsx(bs,{children:Oe}),e[41]=Oe,e[42]=C):C=e[42];let N;e[43]!==y||e[44]!==C?(N=t.jsxs(_s,{children:[y,C]}),e[43]=y,e[44]=C,e[45]=N):N=e[45];let Ce;e[46]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(x,{htmlFor:"code",children:"Coupon Code *"}),e[46]=Ce):Ce=e[46];const is=s.data.code;let S;e[47]!==s?(S=r=>s.setData("code",r.target.value.toUpperCase()),e[47]=s,e[48]=S):S=e[48];const Pe=s.errors.code&&"border-destructive";let D;e[49]!==Pe?(D=xs(Pe),e[49]=Pe,e[50]=D):D=e[50];let w;e[51]!==s.data.code||e[52]!==s.processing||e[53]!==S||e[54]!==D?(w=t.jsx(ie,{id:"code",value:is,onChange:S,placeholder:"WELCOME25",className:D,disabled:s.processing}),e[51]=s.data.code,e[52]=s.processing,e[53]=S,e[54]=D,e[55]=w):w=e[55];let T;e[56]!==s.errors.code?(T=s.errors.code&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.code}),e[56]=s.errors.code,e[57]=T):T=e[57];let E;e[58]!==w||e[59]!==T?(E=t.jsxs("div",{className:"sm:col-span-2",children:[Ce,w,T]}),e[58]=w,e[59]=T,e[60]=E):E=e[60];let Ne;e[61]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(x,{htmlFor:"type",children:"Discount Type *"}),e[61]=Ne):Ne=e[61];let k;e[62]!==s?(k=r=>s.setData("type",r),e[62]=s,e[63]=k):k=e[63];let Se;e[64]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(Ds,{children:t.jsx(ws,{})}),e[64]=Se):Se=e[64];let De;e[65]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsxs(Ts,{children:[t.jsx(es,{value:"fixed",children:"Fixed Amount ($)"}),t.jsx(es,{value:"percent",children:"Percentage (%)"})]}),e[65]=De):De=e[65];let M;e[66]!==s.data.type||e[67]!==s.processing||e[68]!==k?(M=t.jsxs(Ss,{value:s.data.type,onValueChange:k,disabled:s.processing,children:[Se,De]}),e[66]=s.data.type,e[67]=s.processing,e[68]=k,e[69]=M):M=e[69];let F;e[70]!==s.errors.type?(F=s.errors.type&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.type}),e[70]=s.errors.type,e[71]=F):F=e[71];let z;e[72]!==M||e[73]!==F?(z=t.jsxs("div",{children:[Ne,M,F]}),e[72]=M,e[73]=F,e[74]=z):z=e[74];let we;e[75]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(x,{htmlFor:"value",children:"Value *"}),e[75]=we):we=e[75];let $;e[76]!==s?($=r=>s.setData("value",r.target.value?Number(r.target.value):""),e[76]=s,e[77]=$):$=e[77];const Ve=s.data.type==="percent"?"10":"4.99";let I;e[78]!==s.data.value||e[79]!==s.processing||e[80]!==$||e[81]!==Ve?(I=t.jsx(ie,{id:"value",type:"number",step:"0.01",min:"0.01",value:s.data.value,onChange:$,placeholder:Ve,disabled:s.processing}),e[78]=s.data.value,e[79]=s.processing,e[80]=$,e[81]=Ve,e[82]=I):I=e[82];let A;e[83]!==s.errors.value?(A=s.errors.value&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.value}),e[83]=s.errors.value,e[84]=A):A=e[84];let B;e[85]!==I||e[86]!==A?(B=t.jsxs("div",{children:[we,I,A]}),e[85]=I,e[86]=A,e[87]=B):B=e[87];let Te;e[88]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(x,{htmlFor:"min_spend",children:"Minimum Spend ($)"}),e[88]=Te):Te=e[88];let H;e[89]!==s?(H=r=>s.setData("min_spend",r.target.value?Number(r.target.value):""),e[89]=s,e[90]=H):H=e[90];let L;e[91]!==s.data.min_spend||e[92]!==s.processing||e[93]!==H?(L=t.jsx(ie,{id:"min_spend",type:"number",min:"0",value:s.data.min_spend,onChange:H,placeholder:"No minimum",disabled:s.processing}),e[91]=s.data.min_spend,e[92]=s.processing,e[93]=H,e[94]=L):L=e[94];let U;e[95]!==s.errors.min_spend?(U=s.errors.min_spend&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.min_spend}),e[95]=s.errors.min_spend,e[96]=U):U=e[96];let O;e[97]!==L||e[98]!==U?(O=t.jsxs("div",{children:[Te,L,U]}),e[97]=L,e[98]=U,e[99]=O):O=e[99];let Ee;e[100]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(x,{htmlFor:"max_uses",children:"Maximum Uses"}),e[100]=Ee):Ee=e[100];let P;e[101]!==s?(P=r=>s.setData("max_uses",r.target.value?Number(r.target.value):""),e[101]=s,e[102]=P):P=e[102];let V;e[103]!==s.data.max_uses||e[104]!==s.processing||e[105]!==P?(V=t.jsx(ie,{id:"max_uses",type:"number",min:"1",value:s.data.max_uses,onChange:P,placeholder:"Unlimited",disabled:s.processing}),e[103]=s.data.max_uses,e[104]=s.processing,e[105]=P,e[106]=V):V=e[106];let R;e[107]!==s.errors.max_uses?(R=s.errors.max_uses&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.max_uses}),e[107]=s.errors.max_uses,e[108]=R):R=e[108];let W;e[109]!==V||e[110]!==R?(W=t.jsxs("div",{children:[Ee,V,R]}),e[109]=V,e[110]=R,e[111]=W):W=e[111];let ke;e[112]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(x,{htmlFor:"expires_at",children:"Expiration Date"}),e[112]=ke):ke=e[112];let q;e[113]!==s?(q=r=>s.setData("expires_at",r.target.value),e[113]=s,e[114]=q):q=e[114];let G;e[115]!==s.data.expires_at||e[116]!==s.processing||e[117]!==q?(G=t.jsx(ie,{id:"expires_at",type:"date",value:s.data.expires_at,onChange:q,disabled:s.processing}),e[115]=s.data.expires_at,e[116]=s.processing,e[117]=q,e[118]=G):G=e[118];let J;e[119]!==s.errors.expires_at?(J=s.errors.expires_at&&t.jsx("p",{className:"mt-1.5 text-sm text-destructive",children:s.errors.expires_at}),e[119]=s.errors.expires_at,e[120]=J):J=e[120];let K;e[121]!==G||e[122]!==J?(K=t.jsxs("div",{className:"sm:col-span-2",children:[ke,G,J]}),e[121]=G,e[122]=J,e[123]=K):K=e[123];let Q;e[124]!==s?(Q=r=>s.setData("is_active",r),e[124]=s,e[125]=Q):Q=e[125];let X;e[126]!==s.data.is_active||e[127]!==s.processing||e[128]!==Q?(X=t.jsx(Es,{id:"is_active",checked:s.data.is_active,onCheckedChange:Q,disabled:s.processing}),e[126]=s.data.is_active,e[127]=s.processing,e[128]=Q,e[129]=X):X=e[129];let Me;e[130]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(x,{htmlFor:"is_active",className:"cursor-pointer",children:"Coupon is active"}),e[130]=Me):Me=e[130];let Y;e[131]!==X?(Y=t.jsxs("div",{className:"sm:col-span-2 flex items-center gap-3 pt-2",children:[X,Me]}),e[131]=X,e[132]=Y):Y=e[132];let Z;e[133]!==E||e[134]!==z||e[135]!==B||e[136]!==O||e[137]!==W||e[138]!==K||e[139]!==Y?(Z=t.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[E,z,B,O,W,K,Y]}),e[133]=E,e[134]=z,e[135]=B,e[136]=O,e[137]=W,e[138]=K,e[139]=Y,e[140]=Z):Z=e[140];let Fe;e[141]===Symbol.for("react.memo_cache_sentinel")?(Fe=()=>ne(!1),e[141]=Fe):Fe=e[141];let ee;e[142]!==s.processing?(ee=t.jsx(p,{type:"button",variant:"outline",onClick:Fe,disabled:s.processing,children:"Cancel"}),e[142]=s.processing,e[143]=ee):ee=e[143];const Re=s.processing?"Saving...":n?"Update Coupon":"Create Coupon";let se;e[144]!==s.processing||e[145]!==Re?(se=t.jsx(p,{type:"submit",disabled:s.processing,children:Re}),e[144]=s.processing,e[145]=Re,e[146]=se):se=e[146];let te;e[147]!==ee||e[148]!==se?(te=t.jsxs(ys,{className:"gap-3 sm:gap-4",children:[ee,se]}),e[147]=ee,e[148]=se,e[149]=te):te=e[149];let re;e[150]!==He||e[151]!==Z||e[152]!==te?(re=t.jsxs("form",{onSubmit:He,className:"space-y-6 py-4",children:[Z,te]}),e[150]=He,e[151]=Z,e[152]=te,e[153]=re):re=e[153];let ae;e[154]!==N||e[155]!==re?(ae=t.jsxs(Cs,{className:"sm:max-w-lg bg-[#121212] border-white/10",children:[N,re]}),e[154]=N,e[155]=re,e[156]=ae):ae=e[156];let le;e[157]!==Ie||e[158]!==ae?(le=t.jsx(Ns,{open:Ie,onOpenChange:ne,children:ae}),e[157]=Ie,e[158]=ae,e[159]=le):le=e[159];let ze;return e[160]!==u||e[161]!==j||e[162]!==_||e[163]!==le?(ze=t.jsxs(zs,{children:[fe,t.jsxs("div",{className:"container mx-auto space-y-10 px-5 py-8 md:px-6 lg:px-8",children:[u,j,_,le]})]}),e[160]=u,e[161]=j,e[162]=_,e[163]=le,e[164]=ze):ze=e[164],ze}function Ps(a){navigator.clipboard.writeText(a),oe.success("Code copied to clipboard")}function Vs(a){confirm("Delete this coupon permanently?")&&qe.delete($e("admin.coupons.destroy",a),{preserveScroll:!0,onSuccess:Ws,onError:Rs})}function Rs(){return oe.error("Delete failed")}function Ws(){return oe.success("Coupon deleted")}function qs(){return oe.error("Operation failed")}export{jt as default};
